{"version":3,"file":"maxtap_plugin.esm.js","sources":["../src/config.ts","../src/Utils/utils.ts","../src/app.ts"],"sourcesContent":["export const MaxTapComponentElementId = 'componentmaxtap';\nexport const GoogleAnalyticsCode  ='G-05P2385Q2K';\nexport const MaxTapMainContainerId = 'containermaxtap';\nexport const DataAttribute = 'data-displaymaxtap';\nexport const DataUrl =\"https://storage.googleapis.com/maxtap-adserver-dev.appspot.com\";\nexport const CssCdn = 'https://unpkg.com/maxtap_plugin@0.1.14/dist/styles.css';\n","import { DataUrl } from \"../config\";\nexport const fetchAdData = (file_name: string): Promise<[]> => {\n\n    return new Promise((res, rej) => {\n        try {\n            if (!file_name.includes('.json')) {\n                file_name += '.json';\n            }\n            fetch(`${DataUrl}/${file_name}`\n                , {\n                    method: \"GET\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        Accept: \"application/json\",\n                    },\n                }\n            )\n                .then(fetch_res => {\n                    fetch_res.json().then((json_data: []) => {\n                        json_data.sort((a, b) => {\n                            if (parseInt(a['start_time']) < parseInt(b['start_time'])) {\n                                return -1;\n                            }\n                            if (parseInt(a['start_time']) > parseInt(b['start_time'])) {\n                                return 1;\n                            }\n                            return 0;\n                        })\n                        res(json_data);\n                    })\n                }).catch(err => {\n                    rej(err);\n                })\n        } catch (err) {\n            rej(err)\n        }\n    })\n\n}","import { CssCdn, DataAttribute, GoogleAnalyticsCode, MaxTapComponentElementId, MaxTapMainContainerId } from './config.js';\nimport { fetchAdData } from './Utils/utils.js';\n/* \n*   A Brief about how MAXTAP Ad  ðŸ”ŒpluginðŸ”Œ works\n?ðŸ›‘ ** Note **: Here in variables,function names..etc component refers to ad, we need to make it because of ad-blockers.\n*  \n*                       ------- * Steps * ---------\n*     => Find video element by data attribute set to the video element ðŸ“¹.\n*\n*     => Once we make sure that video element is available,\n*       Create a main container ðŸ“¦ <div class=\"maxtap_container\"></div> element and add the video element into the created container.\n*\n*     => Set the css properties of main container as same as video parent element.\n*\n*     => Now ðŸ’‰inject maxtap adðŸ“„ component into the main container and next to video element.\n*     \n*     => Then set position,width,font ..etc of ad component to make it look good.\n*\n*     => Then finally add this main element which we created before to video parent element.\n\n*            ðŸ“¦ Our Main container ðŸ“¦\n*                    |\n*          __________|_____________\n*         |                       |\n*   [client video elementðŸ“¹]       [Our Ad element ðŸ“„]\n*\n*\n */\ninterface PluginData {\n    content_id: string;\n}\n\ndeclare global {\n    interface Window { Maxtap: any; gtag: any; dataLayer: any[] }\n}\n\n\nexport class Component {\n\n    private video?: HTMLVideoElement;\n    private parentElement: HTMLElement | null;\n    private component_start_time = -1;\n    private component_end_time = -1;\n    private product_details?: string;\n    private image_url?: string;\n    private redirect_url?: string;\n    private current_component_index = 0;\n    private component_data?: [];\n    private interval_id: any;\n    private is_component_showing = false;\n    private content_id: string;\n    private is_image_loaded: boolean;\n\n    constructor(data: PluginData) {\n        this.content_id = data.content_id;\n        this.parentElement = null;\n        this.is_image_loaded = false;\n        const css_link_element = document.createElement('link');\n        css_link_element.href = CssCdn;\n        css_link_element.rel = 'stylesheet';\n        const ga_script_element = document.createElement('script');\n        ga_script_element.src = `https://www.googletagmanager.com/gtag/js?id=${GoogleAnalyticsCode}`;\n        ga_script_element.async = true;\n        ga_script_element.id = GoogleAnalyticsCode;\n        ga_script_element.addEventListener('load', () => {\n            window.dataLayer = window.dataLayer || [];\n            window.gtag = function () { window.dataLayer.push(arguments); }\n            window.gtag('js', new Date());\n            window.gtag('config', GoogleAnalyticsCode)\n\n        })\n        const head_tag = document.querySelector('head');\n        head_tag?.appendChild(css_link_element);\n        head_tag?.appendChild(ga_script_element);\n    }\n\n    init = () => {\n        this.video = document.querySelector(`[${DataAttribute}]`) as HTMLVideoElement;\n        if (!this.video) {\n            console.error(\"Cannot find video element,Please check data attribute. It should be \" + DataAttribute + `\n            Example:\n            <video src=\"https://some_source\" ${DataAttribute} > </video> `);\n            return;\n        }\n        try {\n            fetchAdData(this.content_id).then(data => {\n                this.component_data = data\n                if (!this.component_data) { return; }\n                this.setRequiredComponentData();\n                this.initializeComponent();\n                const maxtap_component = document.getElementById(MaxTapComponentElementId);\n                maxtap_component?.addEventListener('click', () => {\n                })\n                //* Checking for every second if video time is equal to ad start time.\n                this.interval_id = setInterval(() => {\n                    if (!this.video) {\n                        console.error(\"Cannot find video element with id \");\n                        return;\n                    }\n                    if (!this.is_image_loaded && ((this.component_start_time - this.video!.currentTime) <= 15)) {\n                        this.prefetchImage();\n                    }\n                    if (this.canComponentDisplay(this.video!.currentTime)) {\n                        this.displayComponent();\n                        return;\n                    }\n                    if (this.canCloseComponent(this.video!.currentTime)) {\n                        this.current_component_index++;\n                        this.removeCurrentComponent();\n                    }\n                    //* Updating the current ad data to next ad data.;\n                }, 500);\n            })\n                .catch(err => {\n                    console.error(err)\n                })\n        } catch (err) {\n            console.error(err);\n\n        }\n    }\n\n    private initializeComponent = () => {\n        //*  Getting data from firestore using http request. And changing state of component.\n        if (!this.video) { return; }\n        this.video.style.width = \"100%\";\n        this.video.style.height = \"100%\";\n        this.parentElement = this.video.parentElement;\n        const main_component = document.createElement('div');\n        const main_container = document.createElement('div') as HTMLDivElement;\n        main_container.className = 'maxtap_container';\n        main_container.id = MaxTapMainContainerId;\n        main_component.style.display = 'none';\n        main_component.addEventListener('click', this.onComponentClick);\n        main_component.id = MaxTapComponentElementId;\n        main_component.className = 'maxtap_component_wrapper';\n        main_container.appendChild(this.video);\n        main_container.appendChild(main_component);\n        this.parentElement?.appendChild(main_container);\n        //!<------------------>  Re-initializing the video to get latest reference after manipulating dom elements.<----------------------->\n        this.video = document.querySelector(`[${DataAttribute}]`) as HTMLVideoElement;\n    }\n\n    private prefetchImage = () => {\n        if (!this.component_data) { return; }\n        this.is_image_loaded = true;\n        let img = new Image();\n        img.src = this.component_data[this.current_component_index]['image_url'];\n    }\n\n\n    private canComponentDisplay = (currentTime: number): boolean => {\n        if (this.component_start_time < 0) { return false; }\n        //* Checking video time and also if video is already shown.\n        if ((currentTime >= this.component_start_time) && !this.is_component_showing) {\n            return true;\n        };\n        return false;\n    }\n\n    private canCloseComponent = (currentTime: number): boolean => {\n\n        if (this.component_start_time < 0) { return false; }\n        if ((currentTime >= this.component_end_time) && this.is_component_showing) {\n            return true;\n        }\n        return false;\n    }\n\n    private removeCurrentComponent() {\n        const main_container = document.getElementById(MaxTapComponentElementId);\n        if (this.current_component_index >= this.component_data!.length) {\n            clearInterval(this.interval_id);\n        }\n        else {\n            this.setRequiredComponentData(); // * Updating next ad data to class variables.\n        }\n        if (!main_container) { return; }\n        main_container.style.display = \"none\";\n        main_container.innerHTML = '';\n        this.is_image_loaded = false;\n        this.is_component_showing = false;\n    }\n\n    private displayComponent = () => {\n        //* Displaying ad by just changing css display:none -> display:flex\n        const main_component = document.getElementById(MaxTapComponentElementId);\n        if (!main_component) { return; }\n        main_component.style.display = 'flex';\n        main_component.innerHTML = `\n        <div class=\"maxtap_main\" >\n            <p>${this.product_details}</p>\n            <div class=\"maxtap_img_wrapper\">\n                <img src=\"${this.image_url}\"/>\n            </div>\n        </div>\n        `\n        window.gtag('event', 'watch', {\n            'event_category': 'impression',\n            'event_action': 'watch',\n            \"content_id\": this.content_id,\n        })\n        this.is_component_showing = true;\n    }\n\n    private onComponentClick = () => {\n        window.gtag('event', 'click', {\n            'event_category': 'action',\n            'event_action': 'click',\n            \"content_id\": this.content_id,\n            \"click_time\": Math.floor(this.video!.currentTime)\n        })\n        if (!this.redirect_url) { return; }\n        window.open(this.redirect_url, \"_blank\");\n    }\n\n\n    private setRequiredComponentData() {\n        //* Setting ad to class variable and as well to react state.\n        if (!this.component_data) return;\n        const data = this.component_data;\n        this.component_start_time = parseInt(data[this.current_component_index]['start_time']);\n        this.image_url = data[this.current_component_index]['image_link'];\n        this.redirect_url = data[this.current_component_index]['redirect_link'];\n        this.product_details = data[this.current_component_index]['caption_regional_language'];\n        this.component_end_time = parseInt(data[this.current_component_index]['end_time']);\n    }\n}\n"],"names":["MaxTapComponentElementId","GoogleAnalyticsCode","MaxTapMainContainerId","DataAttribute","DataUrl","CssCdn","fetchAdData","file_name","Promise","res","rej","includes","fetch","method","headers","Accept","then","fetch_res","json","json_data","sort","a","b","parseInt","err","Component","data","video","document","querySelector","console","error","content_id","component_data","setRequiredComponentData","initializeComponent","maxtap_component","getElementById","addEventListener","interval_id","setInterval","is_image_loaded","component_start_time","currentTime","prefetchImage","canComponentDisplay","displayComponent","canCloseComponent","current_component_index","removeCurrentComponent","style","width","height","parentElement","main_component","createElement","main_container","className","id","display","onComponentClick","appendChild","img","Image","src","is_component_showing","component_end_time","innerHTML","product_details","image_url","window","gtag","Math","floor","redirect_url","open","css_link_element","href","rel","ga_script_element","async","dataLayer","push","arguments","Date","head_tag","length","clearInterval"],"mappings":"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"}